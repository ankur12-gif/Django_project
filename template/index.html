<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Crud Application</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
	
	</head>
  <body>
    
	<h2 class="alert alert-warning text-center">LIBRARY MANAGEMENT SYSTEM</h2>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
	<div class="conrtainer mt-3">
		{% for message in messages %}
		<p class="alert alert-success mt-3">{{message}}</p>
		{% endfor %}

		{% if sel_book %}
		<form method="POST" action="{% url 'update_book' sel_book.id %}">
			{% csrf_token %}
			<div class="form-group mb-3">
				<label >Book Name</label>
				<input type="text" class="form-control" value="{{sel_book.book}}" name="book" placeholder="Enter book name">
			</div>
			<div class="form-group mb-3 ">
				<label >Author</label>
				<input type="text" class="form-control" value="{{sel_book.author}}" name="author" placeholder="Enter author name">
			</div>
			<div class="form-group mb-3">
				<label >Year of Publication</label>
				<input type="text" class="form-control" value="{{sel_book.year}}" name="year" placeholder="Enter publishing year">
			</div>
			<div class="form-group mb-4">
				<label > Type </label>
				<input type="text" class="form-control" value="{{sel_book.type}}" name="type" placeholder="Enter type of book like fiction,novels,etc">
			</div>
			<div class="text-center ">
				<button type="submit" class="btn btn-success mb-5 ">Update</button>
			</div>			
		  </form>


		{% else %}
		<form method="POST" action="{% url 'add_book' %}">
			{% csrf_token %}
			<div class="form-group mb-3">
				<label >Book Name</label>
				<input type="text" class="form-control" name="book" placeholder="Enter book name">
			</div>
			<div class="form-group mb-3 ">
				<label >Author</label>
				<input type="text" class="form-control" name="author" placeholder="Enter author name">
			</div>
			<div class="form-group mb-3">
				<label >Year of Publication</label>
				<input type="text" class="form-control" name="year" placeholder="Enter publishing year">
			</div>
			<div class="form-group mb-4">
				<label > Type </label>
				<input type="text" class="form-control" name="type" placeholder="Enter type of book like fiction,novels,etc">
			</div>
			<div class="text-center ">
				<button type="submit" class="btn btn-success mb-5 ">Save</button>
			</div>			
		  </form>
		  {%  endif %}
		  <div class=" mb-3">
			<h4> Here are the details of books</h4>
		  </div>

		  <table class="table table-hover table-dark">
			<thead>
			  <tr>
				<th scope="col">S.No</th>
				<th scope="col">Book Name</th>
				<th scope="col">Author</th>
				<th scope="col">Year</th>
				<th scope="col">Type</th>
				<th scope="col">Edit</th>
				<th scope="col">Delete</th>
			  </tr>
			</thead>
			<tbody>
			{% for i in item_list %}
			  <tr>
				<th scope="row">{{forloop.counter}}</th>
				<td>{{i.book}}</td>
				<td>{{i.author}}</td>
				<td>{{i.year}}</td>
				<td>{{i.type}}</td>
				<td><a href="{% url 'edit_book' i.id %}" class="btn btn-warning">Edit</a></td>
				<td><a href="{% url 'delete_book' i.id %}" class="btn btn-danger">Delete</a></td>
			  </tr>

			  {% endfor %}
			</tbody>
		  </table>
	</div>
</body>
</html>